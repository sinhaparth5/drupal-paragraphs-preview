services:
  spectre_cpa.auditor:
    class: Drupal\spectre_cpa\Service\SpectreCPAAuditor
    arguments: ['@database', '@cache.render', '@current_user', '@config.factory', '@module_handler']

  spectre_cpa.query_logger:
    class: Drupal\spectre_cpa\Service\QueryLogger
    arguments: ['@database']

  spectre_cpa.cache_tracker:
    class: Drupal\spectre_cpa\Service\CacheTracker
    arguments: ['@cache.render', '@cache_tags.invalidator']

  spectre_cpa.render_subscriber:
    class: Drupal\spectre_cpa\EventSubscriber\RenderSubscriber
    arguments: ['@spectre_cpa.auditor', '@current_user']
    tags:
      - { name: event_subscriber }
